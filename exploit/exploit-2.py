import subprocess
from pathlib import Path
import sys

own_host = "::1"

root_dir = Path(__file__).absolute().parent.parent
classpath = root_dir / "service" / "bin"

def exploit(host:str, 
           flagId: str):
   method_args = [host, flagId, own_host]
   process = subprocess.run(["java", "-cp", classpath, "checker.Exploit2"] + method_args, capture_output=True)
   print(process.stderr.decode())
   print(process.stdout.decode())

serverAddress = sys.argv[1]
flagId = sys.argv[2]

exploit(serverAddress, flagId)
